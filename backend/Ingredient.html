<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: Ingredient
  
    &mdash; Documentation by YARD 0.9.8
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "Ingredient";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index (I)</a> &raquo;
    
    
    <span class="title">Ingredient</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: Ingredient
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName"><span class='object_link'><a href="Base.html" title="Base (class)">Base</a></span></span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">ActiveRecord::Base</li>
          
            <li class="next"><span class='object_link'><a href="Base.html" title="Base (class)">Base</a></span></li>
          
            <li class="next">Ingredient</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  <dl>
      <dt>Includes:</dt>
      <dd><span class='object_link'><a href="IngredientCopyable.html" title="IngredientCopyable (module)">IngredientCopyable</a></span>, <span class='object_link'><a href="JobTracking.html" title="JobTracking (module)">JobTracking</a></span></dd>
  </dl>
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>app/models/ingredient.rb</dd>
  </dl>
  
</div>








  
    <h2>
      Class Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#leafs-class_method" title="leafs (class method)">.<strong>leafs</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#all_dependency_constraints-instance_method" title="#all_dependency_constraints (instance method)">#<strong>all_dependency_constraints</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>traverses the ingredients subtree and collects all dependency constraints in it.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#all_leafs-instance_method" title="#all_leafs (instance method)">#<strong>all_leafs</strong>(leafs = [])  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>NOTICE: MUST ensure same traversal order than <code>region_constraints_rec</code>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#application_root-instance_method" title="#application_root (instance method)">#<strong>application_root</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns the root ingredient in the application hierarchy.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#application_root%3F-instance_method" title="#application_root? (instance method)">#<strong>application_root?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#as_json-instance_method" title="#as_json (instance method)">#<strong>as_json</strong>(options = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#assign_user!-instance_method" title="#assign_user! (instance method)">#<strong>assign_user!</strong>(new_user)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Entirely claims an ingredient for a new users (i.e. recursively and including all attachements).</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#assign_user_to_attachments!-instance_method" title="#assign_user_to_attachments! (instance method)">#<strong>assign_user_to_attachments!</strong>(new_user)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#construct_recommendations-instance_method" title="#construct_recommendations (instance method)">#<strong>construct_recommendations</strong>(num_users_list, args = {perform_later: true})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><ul>
<li><code>perform_later</code> [Boolean] whether the construction is scheduled asynchronously  (true).</li>
</ul>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#cpu_workload-instance_method" title="#cpu_workload (instance method)">#<strong>cpu_workload</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#current_region-instance_method" title="#current_region (instance method)">#<strong>current_region</strong>(current_constraint)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#dependency_constraints_rec-instance_method" title="#dependency_constraints_rec (instance method)">#<strong>dependency_constraints_rec</strong>(constraint_hash = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>recursive postorder tree traversal method that returns a hash with all dependency constraints found in the subtree.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#destroy_all_app_recommendations-instance_method" title="#destroy_all_app_recommendations (instance method)">#<strong>destroy_all_app_recommendations</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#leaf%3F-instance_method" title="#leaf? (instance method)">#<strong>leaf?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#preferred_region_areas-instance_method" title="#preferred_region_areas (instance method)">#<strong>preferred_region_areas</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Lists all region areas present in the model.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#ram_workload-instance_method" title="#ram_workload (instance method)">#<strong>ram_workload</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#region_constraints-instance_method" title="#region_constraints (instance method)">#<strong>region_constraints</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Lists the region area for each leaf ingredient.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#region_constraints_rec-instance_method" title="#region_constraints_rec (instance method)">#<strong>region_constraints_rec</strong>(constraints, current_constraint)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>NOTICE: MUST ensure same traversal order than <code>all_leafs</code>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#scaling_workload-instance_method" title="#scaling_workload (instance method)">#<strong>scaling_workload</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Create workloads with sensible defaults where non-existing to support ingredients without workloads (e.g., avoid data migration).</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#schedule_recommendation_jobs-instance_method" title="#schedule_recommendation_jobs (instance method)">#<strong>schedule_recommendation_jobs</strong>(num_users_list)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#set_name_prefix!-instance_method" title="#set_name_prefix! (instance method)">#<strong>set_name_prefix!</strong>(prefix)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#set_name_suffix!-instance_method" title="#set_name_suffix! (instance method)">#<strong>set_name_suffix!</strong>(suffix)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#update_constraints-instance_method" title="#update_constraints (instance method)">#<strong>update_constraints</strong>(num_users)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#workload_jsons-instance_method" title="#workload_jsons (instance method)">#<strong>workload_jsons</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="IngredientCopyable.html" title="IngredientCopyable (module)">IngredientCopyable</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="IngredientCopyable.html#copy-instance_method" title="IngredientCopyable#copy (method)">#copy</a></span>, <span class='object_link'><a href="IngredientCopyable.html#deep_dup-instance_method" title="IngredientCopyable#deep_dup (method)">#deep_dup</a></span>, <span class='object_link'><a href="IngredientCopyable.html#deep_dup_rec-instance_method" title="IngredientCopyable#deep_dup_rec (method)">#deep_dup_rec</a></span>, <span class='object_link'><a href="IngredientCopyable.html#ensure_application_root-instance_method" title="IngredientCopyable#ensure_application_root (method)">#ensure_application_root</a></span>, <span class='object_link'><a href="IngredientCopyable.html#ensure_non_template-instance_method" title="IngredientCopyable#ensure_non_template (method)">#ensure_non_template</a></span>, <span class='object_link'><a href="IngredientCopyable.html#ensure_template-instance_method" title="IngredientCopyable#ensure_template (method)">#ensure_template</a></span>, <span class='object_link'><a href="IngredientCopyable.html#instantiate-instance_method" title="IngredientCopyable#instantiate (method)">#instantiate</a></span>, <span class='object_link'><a href="IngredientCopyable.html#make_template-instance_method" title="IngredientCopyable#make_template (method)">#make_template</a></span>, <span class='object_link'><a href="IngredientCopyable.html#remap_dependencies-instance_method" title="IngredientCopyable#remap_dependencies (method)">#remap_dependencies</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="JobTracking.html" title="JobTracking (module)">JobTracking</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="JobTracking.html#add_job-instance_method" title="JobTracking#add_job (method)">#add_job</a></span>, <span class='object_link'><a href="JobTracking.html#jobs_completed%3F-instance_method" title="JobTracking#jobs_completed? (method)">#jobs_completed?</a></span>, <span class='object_link'><a href="JobTracking.html#remove_job-instance_method" title="JobTracking#remove_job (method)">#remove_job</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods inherited from <span class='object_link'><a href="Base.html" title="Base (class)">Base</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Base.html#ma_accessor-class_method" title="Base.ma_accessor (method)">ma_accessor</a></span>, <span class='object_link'><a href="Base.html#ma_reader-class_method" title="Base.ma_reader (method)">ma_reader</a></span>, <span class='object_link'><a href="Base.html#ma_writer-class_method" title="Base.ma_writer (method)">ma_writer</a></span>, <span class='object_link'><a href="Base.html#serialize_more_attributes-instance_method" title="Base#serialize_more_attributes (method)">#serialize_more_attributes</a></span></p>

  

  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="leafs-class_method">
  
    .<strong>leafs</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


47
48
49</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/ingredient.rb', line 47</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_leafs'>leafs</span>
  <span class='const'><span class='object_link'><a href="" title="Ingredient (class)">Ingredient</a></span></span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_i'>i</span><span class='op'>|</span> <span class='id identifier rubyid_i'>i</span><span class='period'>.</span><span class='id identifier rubyid_leaf?'>leaf?</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="all_dependency_constraints-instance_method">
  
    #<strong>all_dependency_constraints</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>traverses the ingredients subtree and collects all dependency constraints in it</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


161
162
163</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/ingredient.rb', line 161</span>

<span class='kw'>def</span> <span class='id identifier rubyid_all_dependency_constraints'>all_dependency_constraints</span>
  <span class='id identifier rubyid_dependency_constraints_rec'>dependency_constraints_rec</span><span class='period'>.</span><span class='id identifier rubyid_values'>values</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="all_leafs-instance_method">
  
    #<strong>all_leafs</strong>(leafs = [])  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>NOTICE: MUST ensure same traversal order than <code>region_constraints_rec</code></p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


149
150
151
152
153
154
155
156
157
158</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/ingredient.rb', line 149</span>

<span class='kw'>def</span> <span class='id identifier rubyid_all_leafs'>all_leafs</span><span class='lparen'>(</span><span class='id identifier rubyid_leafs'>leafs</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_children'>children</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_child'>child</span><span class='op'>|</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_child'>child</span><span class='period'>.</span><span class='id identifier rubyid_children'>children</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span>
      <span class='id identifier rubyid_leafs'>leafs</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span> <span class='op'>*</span><span class='id identifier rubyid_child'>child</span><span class='period'>.</span><span class='id identifier rubyid_all_leafs'>all_leafs</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_leafs'>leafs</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span> <span class='id identifier rubyid_child'>child</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_leafs'>leafs</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="application_root-instance_method">
  
    #<strong>application_root</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns the root ingredient in the application hierarchy</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


56
57
58
59
60
61
62</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/ingredient.rb', line 56</span>

<span class='kw'>def</span> <span class='id identifier rubyid_application_root'>application_root</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_application_root?'>application_root?</span>
    <span class='kw'>self</span>
  <span class='kw'>else</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_parent'>parent</span><span class='period'>.</span><span class='id identifier rubyid_application_root'>application_root</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="application_root?-instance_method">
  
    #<strong>application_root?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


64
65
66</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/ingredient.rb', line 64</span>

<span class='kw'>def</span> <span class='id identifier rubyid_application_root?'>application_root?</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_parent'>parent</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="as_json-instance_method">
  
    #<strong>as_json</strong>(options = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


232
233
234
235
236
237
238
239
240
241
242
243
244
245
246</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/ingredient.rb', line 232</span>

<span class='kw'>def</span> <span class='id identifier rubyid_as_json'>as_json</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_hash'>hash</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='id identifier rubyid_hash'>hash</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span>
  <span class='id identifier rubyid_hash'>hash</span><span class='lbracket'>[</span><span class='symbol'>:name</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span>
  <span class='id identifier rubyid_hash'>hash</span><span class='lbracket'>[</span><span class='symbol'>:icon</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_icon'>icon</span>
  <span class='id identifier rubyid_hash'>hash</span><span class='lbracket'>[</span><span class='symbol'>:body</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_body'>body</span>
  <span class='id identifier rubyid_hash'>hash</span><span class='lbracket'>[</span><span class='symbol'>:parent_id</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_parent'>parent</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span> <span class='kw'>if</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_parent'>parent</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
  <span class='id identifier rubyid_hash'>hash</span><span class='lbracket'>[</span><span class='symbol'>:template_id</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_template'>template</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span> <span class='kw'>if</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_template'>template</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
  <span class='id identifier rubyid_hash'>hash</span><span class='lbracket'>[</span><span class='symbol'>:created_at</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_created_at'>created_at</span>
  <span class='id identifier rubyid_hash'>hash</span><span class='lbracket'>[</span><span class='symbol'>:updated_at</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_updated_at'>updated_at</span>
  <span class='id identifier rubyid_hash'>hash</span><span class='lbracket'>[</span><span class='symbol'>:children</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_children'>children</span><span class='period'>.</span><span class='id identifier rubyid_collect'>collect</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_c'>c</span><span class='op'>|</span> <span class='id identifier rubyid_c'>c</span><span class='period'>.</span><span class='id identifier rubyid_as_json'>as_json</span><span class='rbrace'>}</span> <span class='kw'>unless</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:skip_children</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_hash'>hash</span><span class='lbracket'>[</span><span class='symbol'>:constraints</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_constraints'>constraints</span><span class='period'>.</span><span class='id identifier rubyid_collect'>collect</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_c'>c</span><span class='op'>|</span> <span class='id identifier rubyid_c'>c</span><span class='period'>.</span><span class='id identifier rubyid_as_json'>as_json</span><span class='rbrace'>}</span> <span class='kw'>unless</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:skip_constraints</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_hash'>hash</span><span class='lbracket'>[</span><span class='symbol'>:workloads</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_workload_jsons'>workload_jsons</span> <span class='kw'>unless</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:skip_workloads</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_hash'>hash</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="assign_user!-instance_method">
  
    #<strong>assign_user!</strong>(new_user)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Entirely claims an ingredient for a new users (i.e. recursively and including all attachements)</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


181
182
183
184
185
186
187
188
189</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/ingredient.rb', line 181</span>

<span class='kw'>def</span> <span class='id identifier rubyid_assign_user!'>assign_user!</span><span class='lparen'>(</span><span class='id identifier rubyid_new_user'>new_user</span><span class='rparen'>)</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_user'>user</span> <span class='op'>=</span> <span class='id identifier rubyid_new_user'>new_user</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_children'>children</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_child'>child</span><span class='op'>|</span>
    <span class='id identifier rubyid_child'>child</span><span class='period'>.</span><span class='id identifier rubyid_assign_user!'>assign_user!</span><span class='lparen'>(</span><span class='id identifier rubyid_new_user'>new_user</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_child'>child</span><span class='period'>.</span><span class='id identifier rubyid_save!'>save!</span>
  <span class='kw'>end</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_assign_user_to_attachments!'>assign_user_to_attachments!</span><span class='lparen'>(</span><span class='id identifier rubyid_new_user'>new_user</span><span class='rparen'>)</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_save!'>save!</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="assign_user_to_attachments!-instance_method">
  
    #<strong>assign_user_to_attachments!</strong>(new_user)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


191
192
193
194
195
196
197
198
199
200
201
202
203
204</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/ingredient.rb', line 191</span>

<span class='kw'>def</span> <span class='id identifier rubyid_assign_user_to_attachments!'>assign_user_to_attachments!</span><span class='lparen'>(</span><span class='id identifier rubyid_new_user'>new_user</span><span class='rparen'>)</span>
  <span class='lparen'>(</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_scaling_workload'>scaling_workload</span><span class='period'>.</span><span class='id identifier rubyid_user'>user</span> <span class='op'>=</span> <span class='id identifier rubyid_new_user'>new_user</span><span class='semicolon'>;</span> <span class='id identifier rubyid_scaling_workload'>scaling_workload</span><span class='period'>.</span><span class='id identifier rubyid_save!'>save!</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_scaling_workload'>scaling_workload</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
  <span class='lparen'>(</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_ram_workload'>ram_workload</span><span class='period'>.</span><span class='id identifier rubyid_user'>user</span> <span class='op'>=</span> <span class='id identifier rubyid_new_user'>new_user</span><span class='semicolon'>;</span> <span class='id identifier rubyid_ram_workload'>ram_workload</span><span class='period'>.</span><span class='id identifier rubyid_save!'>save!</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_ram_workload'>ram_workload</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
  <span class='lparen'>(</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_cpu_workload'>cpu_workload</span><span class='period'>.</span><span class='id identifier rubyid_user'>user</span> <span class='op'>=</span> <span class='id identifier rubyid_new_user'>new_user</span><span class='semicolon'>;</span> <span class='id identifier rubyid_cpu_workload'>cpu_workload</span><span class='period'>.</span><span class='id identifier rubyid_save!'>save!</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_cpu_workload'>cpu_workload</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_constraints'>constraints</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_constraint'>constraint</span><span class='op'>|</span>
    <span class='id identifier rubyid_constraint'>constraint</span><span class='period'>.</span><span class='id identifier rubyid_user'>user</span> <span class='op'>=</span> <span class='id identifier rubyid_new_user'>new_user</span>
    <span class='id identifier rubyid_constraint'>constraint</span><span class='period'>.</span><span class='id identifier rubyid_save!'>save!</span>
  <span class='kw'>end</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_deployment_recommendations'>deployment_recommendations</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_recommendation'>recommendation</span><span class='op'>|</span>
    <span class='id identifier rubyid_recommendation'>recommendation</span><span class='period'>.</span><span class='id identifier rubyid_user'>user</span> <span class='op'>=</span> <span class='id identifier rubyid_new_user'>new_user</span>
    <span class='id identifier rubyid_recommendation'>recommendation</span><span class='period'>.</span><span class='id identifier rubyid_save!'>save!</span>
  <span class='kw'>end</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_save!'>save!</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="construct_recommendations-instance_method">
  
    #<strong>construct_recommendations</strong>(num_users_list, args = {perform_later: true})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <ul>
<li><code>perform_later</code> [Boolean] whether the construction is scheduled asynchronously  (true)</li>
</ul>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>`num_users_list`</span>
      
      
        <span class='type'>(<tt>Array</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>list of number of simultaneous users to generate recommendations</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>`opts`</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>construct option (defaults)</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/ingredient.rb', line 84</span>

<span class='kw'>def</span> <span class='id identifier rubyid_construct_recommendations'>construct_recommendations</span><span class='lparen'>(</span><span class='id identifier rubyid_num_users_list'>num_users_list</span><span class='comma'>,</span> <span class='id identifier rubyid_args'>args</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='label'>perform_later:</span> <span class='kw'>true</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_providers'>providers</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_provider_constraint'>provider_constraint</span><span class='period'>.</span><span class='id identifier rubyid_providers'>providers</span> <span class='kw'>rescue</span> <span class='lbracket'>[</span><span class='kw'>nil</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_num_users_list'>num_users_list</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_num_users'>num_users</span><span class='op'>|</span>
    <span class='id identifier rubyid_providers'>providers</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_provider'>provider</span><span class='op'>|</span>
      <span class='id identifier rubyid_recommendation'>recommendation</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_deployment_recommendations'>deployment_recommendations</span><span class='period'>.</span><span class='id identifier rubyid_create'>create</span><span class='lparen'>(</span>
          <span class='label'>num_simultaneous_users:</span> <span class='id identifier rubyid_num_users'>num_users</span><span class='comma'>,</span>
          <span class='label'>status:</span> <span class='const'><span class='object_link'><a href="DeploymentRecommendation.html" title="DeploymentRecommendation (class)">DeploymentRecommendation</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="DeploymentRecommendation.html#UNCONSTRUCTED-constant" title="DeploymentRecommendation::UNCONSTRUCTED (constant)">UNCONSTRUCTED</a></span></span><span class='comma'>,</span>
          <span class='label'>user:</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_user'>user</span>
      <span class='rparen'>)</span>
      <span class='const'>ActiveRecord</span><span class='op'>::</span><span class='const'>Base</span><span class='period'>.</span><span class='id identifier rubyid_transaction'>transaction</span> <span class='kw'>do</span>
        <span class='id identifier rubyid_update_constraints'>update_constraints</span><span class='lparen'>(</span><span class='id identifier rubyid_num_users'>num_users</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_recommendation'>recommendation</span><span class='period'>.</span><span class='id identifier rubyid_construct'>construct</span><span class='lparen'>(</span><span class='id identifier rubyid_provider'>provider</span><span class='rparen'>)</span>
      <span class='kw'>end</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_args'>args</span><span class='lbracket'>[</span><span class='symbol'>:perform_later</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_recommendation'>recommendation</span><span class='period'>.</span><span class='id identifier rubyid_schedule_evaluation'>schedule_evaluation</span>
      <span class='kw'>else</span>
        <span class='id identifier rubyid_recommendation'>recommendation</span><span class='period'>.</span><span class='id identifier rubyid_evaluate'>evaluate</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="cpu_workload-instance_method">
  
    #<strong>cpu_workload</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


224
225
226</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/ingredient.rb', line 224</span>

<span class='kw'>def</span> <span class='id identifier rubyid_cpu_workload'>cpu_workload</span>
  <span class='kw'>super</span> <span class='op'>||</span> <span class='id identifier rubyid_create_cpu_workload'>create_cpu_workload</span><span class='lparen'>(</span><span class='label'>cspu_user_capacity:</span> <span class='int'>1500</span><span class='comma'>,</span> <span class='label'>parallelism:</span> <span class='float'>0.9</span><span class='comma'>,</span> <span class='label'>user_id:</span> <span class='id identifier rubyid_user_id'>user_id</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="current_region-instance_method">
  
    #<strong>current_region</strong>(current_constraint)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


127
128
129
130
131
132
133</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/ingredient.rb', line 127</span>

<span class='kw'>def</span> <span class='id identifier rubyid_current_region'>current_region</span><span class='lparen'>(</span><span class='id identifier rubyid_current_constraint'>current_constraint</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_preferred_region_area_constraint'>preferred_region_area_constraint</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_preferred_region_area_constraint'>preferred_region_area_constraint</span><span class='period'>.</span><span class='id identifier rubyid_preferred_region_area'>preferred_region_area</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_current_constraint'>current_constraint</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="dependency_constraints_rec-instance_method">
  
    #<strong>dependency_constraints_rec</strong>(constraint_hash = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>recursive postorder tree traversal method that returns a hash with all dependency constraints found in the subtree</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


166
167
168
169
170
171
172
173
174
175
176
177
178</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/ingredient.rb', line 166</span>

<span class='kw'>def</span> <span class='id identifier rubyid_dependency_constraints_rec'>dependency_constraints_rec</span><span class='lparen'>(</span><span class='id identifier rubyid_constraint_hash'>constraint_hash</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_children'>children</span><span class='period'>.</span><span class='id identifier rubyid_all'>all</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_child'>child</span><span class='op'>|</span>
    <span class='id identifier rubyid_constraint_hash'>constraint_hash</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='id identifier rubyid_child'>child</span><span class='period'>.</span><span class='id identifier rubyid_dependency_constraints_rec'>dependency_constraints_rec</span><span class='lparen'>(</span><span class='id identifier rubyid_constraint_hash'>constraint_hash</span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_constraints_as_source'>constraints_as_source</span><span class='period'>.</span><span class='id identifier rubyid_all'>all</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_constraint'>constraint</span><span class='op'>|</span>
    <span class='id identifier rubyid_constraint_hash'>constraint_hash</span><span class='lbracket'>[</span><span class='id identifier rubyid_constraint'>constraint</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_constraint'>constraint</span>
  <span class='kw'>end</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_constraints_as_target'>constraints_as_target</span><span class='period'>.</span><span class='id identifier rubyid_all'>all</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_constraint'>constraint</span><span class='op'>|</span>
    <span class='id identifier rubyid_constraint_hash'>constraint_hash</span><span class='lbracket'>[</span><span class='id identifier rubyid_constraint'>constraint</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_constraint'>constraint</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_constraint_hash'>constraint_hash</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="destroy_all_app_recommendations-instance_method">
  
    #<strong>destroy_all_app_recommendations</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


68
69
70</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/ingredient.rb', line 68</span>

<span class='kw'>def</span> <span class='id identifier rubyid_destroy_all_app_recommendations'>destroy_all_app_recommendations</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_application_root'>application_root</span><span class='period'>.</span><span class='id identifier rubyid_deployment_recommendations'>deployment_recommendations</span><span class='period'>.</span><span class='id identifier rubyid_destroy_all'>destroy_all</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="leaf?-instance_method">
  
    #<strong>leaf?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


51
52
53</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/ingredient.rb', line 51</span>

<span class='kw'>def</span> <span class='id identifier rubyid_leaf?'>leaf?</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_children'>children</span><span class='period'>.</span><span class='id identifier rubyid_none?'>none?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="preferred_region_areas-instance_method">
  
    #<strong>preferred_region_areas</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Lists all region areas present in the model</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


117
118
119</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/ingredient.rb', line 117</span>

<span class='kw'>def</span> <span class='id identifier rubyid_preferred_region_areas'>preferred_region_areas</span>
  <span class='id identifier rubyid_region_constraints'>region_constraints</span><span class='period'>.</span><span class='id identifier rubyid_uniq'>uniq</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="ram_workload-instance_method">
  
    #<strong>ram_workload</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


228
229
230</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/ingredient.rb', line 228</span>

<span class='kw'>def</span> <span class='id identifier rubyid_ram_workload'>ram_workload</span>
  <span class='kw'>super</span> <span class='op'>||</span> <span class='id identifier rubyid_create_ram_workload'>create_ram_workload</span><span class='lparen'>(</span><span class='label'>ram_mb_required:</span> <span class='int'>600</span><span class='comma'>,</span> <span class='label'>ram_mb_required_user_capacity:</span> <span class='int'>200</span><span class='comma'>,</span> <span class='label'>ram_mb_growth_per_user:</span> <span class='float'>0.3</span><span class='comma'>,</span> <span class='label'>user_id:</span> <span class='id identifier rubyid_user_id'>user_id</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="region_constraints-instance_method">
  
    #<strong>region_constraints</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Lists the region area for each leaf ingredient</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


122
123
124
125</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/ingredient.rb', line 122</span>

<span class='kw'>def</span> <span class='id identifier rubyid_region_constraints'>region_constraints</span>
  <span class='id identifier rubyid_current_constraint'>current_constraint</span> <span class='op'>=</span> <span class='id identifier rubyid_current_region'>current_region</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>EU</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_region_constraints_rec'>region_constraints_rec</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_current_constraint'>current_constraint</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="region_constraints_rec-instance_method">
  
    #<strong>region_constraints_rec</strong>(constraints, current_constraint)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>NOTICE: MUST ensure same traversal order than <code>all_leafs</code></p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


136
137
138
139
140
141
142
143
144
145
146</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/ingredient.rb', line 136</span>

<span class='kw'>def</span> <span class='id identifier rubyid_region_constraints_rec'>region_constraints_rec</span><span class='lparen'>(</span><span class='id identifier rubyid_constraints'>constraints</span><span class='comma'>,</span> <span class='id identifier rubyid_current_constraint'>current_constraint</span><span class='rparen'>)</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_children'>children</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_child'>child</span><span class='op'>|</span>
    <span class='id identifier rubyid_new_current_constraint'>new_current_constraint</span> <span class='op'>=</span> <span class='id identifier rubyid_child'>child</span><span class='period'>.</span><span class='id identifier rubyid_current_region'>current_region</span><span class='lparen'>(</span><span class='id identifier rubyid_current_constraint'>current_constraint</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_child'>child</span><span class='period'>.</span><span class='id identifier rubyid_children'>children</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span>
      <span class='id identifier rubyid_child'>child</span><span class='period'>.</span><span class='id identifier rubyid_region_constraints_rec'>region_constraints_rec</span><span class='lparen'>(</span><span class='id identifier rubyid_constraints'>constraints</span><span class='comma'>,</span> <span class='id identifier rubyid_new_current_constraint'>new_current_constraint</span><span class='rparen'>)</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_constraints'>constraints</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span><span class='lparen'>(</span><span class='id identifier rubyid_new_current_constraint'>new_current_constraint</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_constraints'>constraints</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="scaling_workload-instance_method">
  
    #<strong>scaling_workload</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Create workloads with sensible defaults where non-existing to support ingredients without workloads (e.g., avoid data migration)</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


220
221
222</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/ingredient.rb', line 220</span>

<span class='kw'>def</span> <span class='id identifier rubyid_scaling_workload'>scaling_workload</span>
  <span class='kw'>super</span> <span class='op'>||</span> <span class='id identifier rubyid_create_scaling_workload'>create_scaling_workload</span><span class='lparen'>(</span><span class='label'>scale_ingredient:</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='label'>user_id:</span> <span class='id identifier rubyid_user_id'>user_id</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="schedule_recommendation_jobs-instance_method">
  
    #<strong>schedule_recommendation_jobs</strong>(num_users_list)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


72
73
74
75
76
77
78
79</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/ingredient.rb', line 72</span>

<span class='kw'>def</span> <span class='id identifier rubyid_schedule_recommendation_jobs'>schedule_recommendation_jobs</span><span class='lparen'>(</span><span class='id identifier rubyid_num_users_list'>num_users_list</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_fail'>fail</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Recommendations can only be generated for root ingredients!</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>unless</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_application_root?'>application_root?</span>
  <span class='const'>ActiveRecord</span><span class='op'>::</span><span class='const'>Base</span><span class='period'>.</span><span class='id identifier rubyid_transaction'>transaction</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_job'>job</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="ConstructRecommendationsJob.html" title="ConstructRecommendationsJob (class)">ConstructRecommendationsJob</a></span></span><span class='period'>.</span><span class='id identifier rubyid_perform_later'>perform_later</span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_num_users_list'>num_users_list</span><span class='rparen'>)</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_add_job'>add_job</span><span class='lparen'>(</span><span class='id identifier rubyid_job'>job</span><span class='period'>.</span><span class='id identifier rubyid_job_id'>job_id</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_job'>job</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="set_name_prefix!-instance_method">
  
    #<strong>set_name_prefix!</strong>(prefix)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


206
207
208
209
210</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/ingredient.rb', line 206</span>

<span class='kw'>def</span> <span class='id identifier rubyid_set_name_prefix!'>set_name_prefix!</span><span class='lparen'>(</span><span class='id identifier rubyid_prefix'>prefix</span><span class='rparen'>)</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='id identifier rubyid_prefix'>prefix</span> <span class='op'>+</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_save!'>save!</span>
  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="set_name_suffix!-instance_method">
  
    #<strong>set_name_suffix!</strong>(suffix)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


212
213
214
215
216</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/ingredient.rb', line 212</span>

<span class='kw'>def</span> <span class='id identifier rubyid_set_name_suffix!'>set_name_suffix!</span><span class='lparen'>(</span><span class='id identifier rubyid_suffix'>suffix</span><span class='rparen'>)</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span> <span class='op'>+</span> <span class='id identifier rubyid_suffix'>suffix</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_save!'>save!</span>
  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="update_constraints-instance_method">
  
    #<strong>update_constraints</strong>(num_users)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


106
107
108
109
110
111
112
113
114</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/ingredient.rb', line 106</span>

<span class='kw'>def</span> <span class='id identifier rubyid_update_constraints'>update_constraints</span><span class='lparen'>(</span><span class='id identifier rubyid_num_users'>num_users</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_all_leafs'>all_leafs</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_leaf'>leaf</span><span class='op'>|</span>
    <span class='id identifier rubyid_leaf'>leaf</span><span class='period'>.</span><span class='id identifier rubyid_ram_workload'>ram_workload</span><span class='period'>.</span><span class='id identifier rubyid_to_constraint'>to_constraint</span><span class='lparen'>(</span><span class='id identifier rubyid_num_users'>num_users</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_leaf'>leaf</span><span class='period'>.</span><span class='id identifier rubyid_cpu_workload'>cpu_workload</span><span class='period'>.</span><span class='id identifier rubyid_to_constraint'>to_constraint</span><span class='lparen'>(</span><span class='id identifier rubyid_num_users'>num_users</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_leaf'>leaf</span><span class='period'>.</span><span class='id identifier rubyid_scaling_workload'>scaling_workload</span><span class='period'>.</span><span class='id identifier rubyid_to_constraint'>to_constraint</span><span class='lparen'>(</span><span class='id identifier rubyid_num_users'>num_users</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>rescue</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Missing a workload definition for a leaf ingredient: </span><span class='tstring_end'>&#39;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_e'>e</span><span class='period'>.</span><span class='id identifier rubyid_message'>message</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="workload_jsons-instance_method">
  
    #<strong>workload_jsons</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


248
249
250
251
252
253
254</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/ingredient.rb', line 248</span>

<span class='kw'>def</span> <span class='id identifier rubyid_workload_jsons'>workload_jsons</span>
  <span class='id identifier rubyid_workloads'>workloads</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='id identifier rubyid_workloads'>workloads</span><span class='lbracket'>[</span><span class='symbol'>:cpu_workload</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_cpu_workload'>cpu_workload</span><span class='period'>.</span><span class='id identifier rubyid_as_json'>as_json</span> <span class='kw'>if</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_cpu_workload'>cpu_workload</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
  <span class='id identifier rubyid_workloads'>workloads</span><span class='lbracket'>[</span><span class='symbol'>:ram_workload</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_ram_workload'>ram_workload</span><span class='period'>.</span><span class='id identifier rubyid_as_json'>as_json</span> <span class='kw'>if</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_ram_workload'>ram_workload</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
  <span class='id identifier rubyid_workloads'>workloads</span><span class='lbracket'>[</span><span class='symbol'>:scaling_workload</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_scaling_workload'>scaling_workload</span><span class='period'>.</span><span class='id identifier rubyid_as_json'>as_json</span> <span class='kw'>if</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_scaling_workload'>scaling_workload</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
  <span class='id identifier rubyid_workloads'>workloads</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Thu Mar  2 15:02:21 2017 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.8 (ruby-2.3.3).
</div>

    </div>
  </body>
</html>