<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  File: Developer Guide
  
    &mdash; Documentation by YARD 0.9.8
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "Developer_Guide";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="file_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index</a> &raquo; 
    <span class="title">File: Developer Guide</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><div id='filecontents'><h1>Cloud Stove Developer Guide</h1>

<h2>Architecture Overview</h2>

<p>The Cloud Stove currently consists of two main components: The backend API implemented using Ruby on Rails and the front end application implemented using AngularJS. The figure below shows a high-level overview of the Cloud Stove components (modeled using the Cloud Stove) as currently deployed:</p>

<p><img src="images/architecture.png" alt="cloud stove architecture"></p>

<p>The backend is largely a standard Rails app with ActiveRecord RDBMS data store. Recommendations are generated by transforming the modeled applications, constraints, and available provider resources into a <a href="http://www.minizinc.org">MiniZinc</a> model and solving the optimal resource allocation problem using <a href="https://developers.google.com/optimization/">Google or-tools</a> in asynchronously executed background jobs. </p>

<p>The Angular front end is implemented in TypeScript and currently exposes most features of the backend API.</p>

<h2>Data Model</h2>

<p>The figure below shows an overview of the Cloud Stove data model. Note that the <span class='object_link'><a href="User.html" title="User (class)"><code>User</code></a></span> model was omitted from the figure to reduce clutter.</p>

<p><img src="images/erd.svg" alt="data model ERD"></p>

<p>All <code>Ingredient</code>, <code>DeploymentRecommendation</code>, <code>*Workload</code>, and <code>*Constraint</code> records are owned by exactly one user. By default, a user can only see and modify entities that belong to them. There is one exception, though. Template instances (discussed below) created by an admin are visible to all users.</p>

<h3><code>Base</code> Model</h3>

<p>If you need to store a lot of (semi-)structured metadata for an entity (that you don&#39;t need to query on), the <code>Base</code> model provides a <code>more_attributes</code> hash that will be serialized as a JSON object. For additional comfort, <code>Base</code> lets you define accessors for attributes stored in the serialized hash. Similar to regular attribute accessors, <code>ma_reader</code>, <code>ma_writer</code>, and <code>ma_accessor</code> will create attribute readers, writers, or both. Using accessors you can easily migrate attributes from the serialized hash to database columns when needed. When you add the column, you just need to go over all records and copy the new attribute values from the <code>more_attributes</code> hash. To use the <code>Base</code> model, inherit from <code>Base</code> and make sure that a <code>more_attributes</code> column of type <code>text</code> is part of your table.</p>

<p>For more information, see the documentation of <span class='object_link'><a href="Base.html" title="Base (class)">Base</a></span>.</p>

<h3>Ingredients</h3>

<p><img src="images/erd-ingredient.svg" alt="Ingredients and Constraints"></p>

<p><span class='object_link'><a href="Ingredient.html" title="Ingredient (class)">Ingredient</a></span>s are at the core of the Cloud Stove data model. Application Templates, applications, and application components are modeled as hierarchical collections of ingredients. Application templates (or archetypes) and applications are at the root of ingredient trees, i.e., they have no parent (their <code>parent_id</code> is <code>nil</code>). Application components are linked to an application using <code>parent_id</code>. Currently, applications are flat collections of components, i.e., all components are directly assigned to one parent application. In the future, we will support reusing applications as components in other applications to create application ensembles. Templates and their components are marked by setting the <code>is_template</code> flag to <code>true</code> (The <span class='object_link'><a href="SameIsTemplateValidator.html" title="SameIsTemplateValidator (class)">SameIsTemplateValidator</a></span> ensures that ingredient hierarchies remain consistent).</p>

<h3>Constraints</h3>

<p><img src="images/erd-ingredient-constraint.svg" alt="Ingredients and Constraints"></p>

<p>All application and component properties and interactions that will later influence deployment recommendations are modeled as constraints in the Cloud Stove. As shown in the figure above, several constraint types are currently supported:</p>

<ul>
<li><strong><span class='object_link'><a href="DependencyConstraint.html" title="DependencyConstraint (class)">DependencyConstraint</a></span></strong>: Component dependencies, i.e., components that communicate with each other, can be represented using dependency constraints. These component dependencies are subsequently used in combination with traffic workloads to model expected network traffic between components of an application.</li>
<li><strong><span class='object_link'><a href="CpuConstraint.html" title="CpuConstraint (class)">CpuConstraint</a></span></strong>: This constraint represents the minimum amount of CPU performance required for deploying the given application component. CPU performance is currently represented as the number of required &quot;standard&quot; CPU cores. In the future, we will migrate towards a Cloud Stove Processing Unit (CSPU) that assesses CPU performance based on automated, periodic instance benchmarks.</li>
<li><strong><span class='object_link'><a href="RamConstraint.html" title="RamConstraint (class)">RamConstraint</a></span></strong>: Similar to the CPU constraint, this constraint represents the minimum amount of RAM required (in MB) to successfully deploy the given component in production.</li>
<li><strong><span class='object_link'><a href="ScalingConstraint.html" title="ScalingConstraint (class)">ScalingConstraint</a></span></strong>: This constraint specifies the maximum number of instances this component can be distributed across. To prevent horizontal scaling for a component, set <code>max_num_instances</code> to <code>1</code> , or set it to <code>0</code> for unlimited horizontal scaling.</li>
<li><strong><span class='object_link'><a href="PreferredRegionAreaConstraint.html" title="PreferredRegionAreaConstraint (class)">PreferredRegionAreaConstraint</a></span></strong>: Deployment recommendations for applications and individual components can be constrained to certain geographical regions using this constraint. Currently, the following regions are supported: EU, US (North America), Asia-Pacific, South America. More regions will be added as providers open data centers in other regions.</li>
<li><strong><span class='object_link'><a href="ProviderConstraint.html" title="ProviderConstraint (class)">ProviderConstraint</a></span></strong>: This constraint allows you to restrict recommendations to a given set of cloud providers. The list of allowed providers is stored as a serialized array of provider ids.</li>
</ul>

<p>Constraints are implemented as <a href="http://api.rubyonrails.org/classes/ActiveRecord/Inheritance.html">single table inheritance (STI)</a>.</p>

<p>Constraints are always attached to an ingredient. By default, a constraint applies only to the ingredient it is attached to. However, provider and region area constraints also apply all children of an ingredient.</p>

<p>Except for dependency constraints, there are not many reasons to directly create constraints for components. Usually, constraints are generated as part of a deployment scenario that is derived from modeled workloads.</p>

<h3>Workloads</h3>

<p><img src="images/erd-ingredient-workload.svg" alt="workloads"></p>

<p>Workloads are at the core of the deployment scenario analysis in the Cloud Stove. The different types of workloads provide an abstraction from concrete component constraints and allow users to specify infrastructure requirements for application components based on the requirements of a typical user of the deployed application. Several workload types are supported:</p>

<ul>
<li><strong><span class='object_link'><a href="CpuWorkload.html" title="CpuWorkload (class)">CpuWorkload</a></span></strong>: The required CPU performance for a component is modeled with two parameters. First, the expected number of users that can be handled with one CSPU (i.e., currently one vCPU core) is specified in <code>cspu_user_capacity</code>. Additionally, the expected speedup of each additional CSPU is specified using the <code>parallelism</code> attribute.</li>
<li><strong><span class='object_link'><a href="RamWorkload.html" title="RamWorkload (class)">RamWorkload</a></span></strong>: Component memory requirements are modeled based on three parameters. We assume that a component needs a minimum amount of RAM for basic functionality (<code>ram_mb_required</code>), and that a certain number of users can be served with this base amount (<code>ram_mb_required_user_capacity</code>). Finally, the amount of memory required for each additional user is captured in <code>ram_mb_growth_per_user</code>.</li>
<li><strong><span class='object_link'><a href="ScalingWorkload.html" title="ScalingWorkload (class)">ScalingWorkload</a></span></strong>: With this basic scaling workload, components can be constrained to vertical scaling or allowed to horizontally scale across an arbitrary number of instances. Set <code>scale_ingredient</code> accordingly.</li>
<li><strong><span class='object_link'><a href="TrafficWorkload.html" title="TrafficWorkload (class)">TrafficWorkload</a></span></strong>: Using the traffic workload, users can model the expected number and size of customer requests the application should be able to serve. The three parameters represent the size of a typical application response (<code>request_size_kb</code>), the average number of customer requests per session (<code>requests_per_visit</code>), and the expected number of user sessions over a month (<code>visits_per_month</code>). We plan to use this data to generate traffic cost estimations along with deployment recommendations.</li>
</ul>

<p><em>Note:</em> The <span class='object_link'><a href="Workload.html" title="Workload (class)">Workload</a></span> base class implements common workload behavior but has no active record bindings.</p>

<h3>Providers and Resources</h3>

<p><img src="images/erd-provider-resource.svg" alt="providers and resources"></p>

<p>To pull in available resources from providers, the Cloud Stove uses a pluggable provider updater mechanism. Provider updaters inherit from the <span class='object_link'><a href="ProviderUpdater.html" title="ProviderUpdater (class)">ProviderUpdater</a></span> base class. The base class will dynamically load all available provider updaters in the <code>app/provider_updaters/</code> directory when <span class='object_link'><a href="ProviderUpdater.html#providers-class_method" title="ProviderUpdater.providers (method)">ProviderUpdater.providers</a></span> is called. To schedule background jobs executing all available updaters, call <span class='object_link'><a href="ProviderUpdater.html#update_providers-class_method" title="ProviderUpdater.update_providers (method)">ProviderUpdater.update_providers</a></span>.</p>

<p>Currently supported providers:</p>

<ul>
<li><span class='object_link'><a href="AmazonUpdater.html" title="AmazonUpdater (class)">Amazon EC2</a></span></li>
<li><span class='object_link'><a href="GoogleUpdater.html" title="GoogleUpdater (class)">Google Compute Engine</a></span></li>
<li><span class='object_link'><a href="AzureUpdater.html" title="AzureUpdater (class)">Microsoft Azure VMs</a></span></li>
<li><span class='object_link'><a href="RackspaceUpdater.html" title="RackspaceUpdater (class)">Rackspace Cloud Servers</a></span></li>
<li><span class='object_link'><a href="DigitalOceanUpdater.html" title="DigitalOceanUpdater (class)">Digital Ocean</a></span></li>
<li><span class='object_link'><a href="JoyentUpdater.html" title="JoyentUpdater (class)">Joyent VMs</a></span></li>
<li><span class='object_link'><a href="AtlanticNetUpdater.html" title="AtlanticNetUpdater (class)">Atlantic.net</a></span></li>
</ul>

<p>Provider data update can be initiated in the provider list in the backend or using the <code>jobs:update_providers</code>  rake task.</p>

<p>A provider updater is a background job that initiates fetching and parsing of provider resources in <code>#perform</code>. An updater is expected to maintain a <span class='object_link'><a href="Provider.html" title="Provider (class)">Provider</a></span> record with a unique name that is created upon first use and subsequently updated (not re-created). Similarly, all attached <span class='object_link'><a href="Resource.html" title="Resource (class)">Resource</a></span>s should be created and updated to always reflect the current state of the provider offering. Provider and resource ids should remain stable.</p>

<p><em>Note:</em> There is no versioning mechanism for stored provider resources. Only the current state of provider offerings should be stored. To preserve resource states when deployment recommendations are generated, recommendations store the generated MiniZinc data files on creation.</p>

<h4>Resource and Region Codes</h4>

<p>The following codes were introduced to reliably identify individual resources even when the resources have to updated (or regenerated) by the provider crawlers:</p>

<ul>
<li><code>resource_code := deterministic_hash(resource_code, resource_name)</code></li>
<li><code>region_code := deterministic_hash(provider_name, region_name)</code></li>
</ul>

<p>Thus, a resource is identified by the composite keys: <code>provider_name</code>, <code>region_name</code>, <code>resource_name</code>.</p>

<h3>Deployment Recommendations</h3>

<p><img src="images/erd-deploymentrecommendation.svg" alt="deployment recommendations"></p>

<p><span class='object_link'><a href="DeploymentRecommendation.html" title="DeploymentRecommendation (class)">Deployment recommendations</a></span> capture resource recommendations for deploying applications (ingredient topologies). Each ingredient in an application is assumed to be deployed on a set of identical resources (cloud instances). A deployment recommendation is created for an application root instance using <span class='object_link'><a href="Ingredient.html#construct_recommendations-instance_method" title="Ingredient#construct_recommendations (method)">Ingredient#construct_recommendations</a></span>, passing an array of target numbers of simulated users. In the regular request flow, deployment recommendations are created and computed using the <span class='object_link'><a href="ConstructRecommendationsJob.html" title="ConstructRecommendationsJob (class)">ConstructRecommendationsJob</a></span> and <span class='object_link'><a href="EvaluateRecommendationJob.html" title="EvaluateRecommendationJob (class)">EvaluateRecommendationJob</a></span> background jobs respectively.</p>

<p>When creating a new deployment recommendation, the current state of the application, along with resource specifications from the specified provider (or all providers if no provider id was specified) are transformed into <a href="http://minizinc.org">MiniZinc</a> data files. The generated data files are then used to solve the resource assignment problem using the Cloud Stove MiniZinc model in <code>lib/horizontal-scaling.mzn</code>. Currently, the <a href="https://developers.google.com/optimization/">Google or-tools</a> optimization tool set is used to solve the optimization problem.</p>

<h3>Using different optimizer backends</h3>

<p>Since the Cloud Stove uses on MiniZinc to represent optimization problems, you can easily change optimization tools as long as there is a MiniZinc binding. </p>

<p>To use a different optimizer, you want to add the FlatZinc interpreter binaries to the <code>vendor/minizinc/bin</code> directory, and place the included MiniZinc library files in <code>vendor/minizinc/share/minizinc/&lt;interpreter-name&gt;</code>. For details on how to prepare a suitable MiniZinc distribution, check out the combined <a href="https://github.com/inz/minizinc-dist">MiniZinc/or-tools distribution</a> that we use for the Cloud Stove. The <code>release</code> script shows how to combine a basic MiniZinc distribution with a third party optimization tool.</p>

<p>To actually invoke another optimizer when generating recommendations, change the MiniZinc command in <span class='object_link'><a href="DeploymentRecommendation.html#evaluate-instance_method" title="DeploymentRecommendation#evaluate (method)">DeploymentRecommendation#evaluate</a></span>. For instance, to generate recommendations using the included G12 optimizer, change  <code>command</code> to:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_command'>command</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>minizinc -G g12-fd </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_minizinc_model'>minizinc_model</span><span class='embexpr_end'>}</span><span class='tstring_content'> </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_resources'>resources</span><span class='period'>.</span><span class='id identifier rubyid_path'>path</span><span class='embexpr_end'>}</span><span class='tstring_content'> </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_ingredients'>ingredients</span><span class='period'>.</span><span class='id identifier rubyid_path'>path</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
</code></pre>

<h3>Extending or modifying the optimization model</h3>

<p>As mentioned above, the Cloud Stove optimization model can be found at <code>lib/horizontal-scaling.mzn</code>. If you want to change or replace this model, make sure that the structure of the <code>output</code> statement is not changed. You can change the active optimization model by modifying the path in <span class='object_link'><a href="DeploymentRecommendation.html#minizinc_model-instance_method" title="DeploymentRecommendation#minizinc_model (method)">DeploymentRecommendation#minizinc_model</a></span>. The data files necessary for performing the optimization are generated in <span class='object_link'><a href="DeploymentRecommendation.html#generate_resources_data-instance_method" title="DeploymentRecommendation#generate_resources_data (method)">DeploymentRecommendation#generate_resources_data</a></span> and <span class='object_link'><a href="DeploymentRecommendation.html#generate_ingredients_data-instance_method" title="DeploymentRecommendation#generate_ingredients_data (method)">DeploymentRecommendation#generate_ingredients_data</a></span>, creating MiniZinc data representations of available provider resources and the modeled application respectively. If you change the model to expect additional parameters from the application topology, you will have to make sure to generate them in <span class='object_link'><a href="DeploymentRecommendation.html#generate_ingredients_data-instance_method" title="DeploymentRecommendation#generate_ingredients_data (method)">DeploymentRecommendation#generate_ingredients_data</a></span>.</p>

<h3>Seed Records</h3>

<p>To seed the database with sensible defaults, we slightly extend the Rails seeds mechanism. Since seed records for applications and application templates involve multiple dependent objects, we create complete application (and template) topologies using encapsulated seed files in <code>db/seeds/</code>. To add a new seed record, create a file in <code>db/seeds/</code> and load it in <code>db/seeds.rb</code> using <code>require_seed</code>.</p>

<p>To ease the creation of idempotent seed records, we provide the <code>ActiveRecord::Relation#seed_with!</code> method (available only for seeds, see <code>db/seeds.rb</code>) that will search for a seed record using the given attributes and then yield the found (or created) record to the given block. See it in use, e.g. in <code>db/seeds/ingredient_kanban_board.rb</code>.</p>

<h2>Serialization</h2>

<p>JSON serialization of Rails models are defined in the <code>as_json</code> methods within the models such as:</p>

<pre class="code ruby"><code class="ruby">def as_json(options={})
  hash = super
  hash[:id] = self.id
  ...
  hash
end
</code></pre>

<h2>Authentication</h2>

<p>Backend authentication is managed using <a href="https://github.com/lynndylanhurley/devise_token_auth">Devise Token Auth</a>. The front end authenticates with the backend using <a href="https://github.com/neroniaky/angular2-token">Angular2-Token</a>.</p>

<h2>API</h2>

<p>The Cloud Stove API has a (largely) RESTful API. After authenticating against <code>/api/auth/sign_in</code> (see <a href="https://github.com/lynndylanhurley/devise_token_auth">Devise Token Auth</a> documentation for details), you can access all Cloud Stove resources as described below. The reference client for the Cloud Stove API is the Cloud Stove front end AngularJS application. If in doubt, review and study API usage there.</p>

<h3>Resources</h3>

<p>In general, all available resources are scoped to the currently signed in user. A valid authentication token (i.e., a <code>Authorization BEARER &lt;token&gt;</code> HTTP header) must be supplied with each request.</p>

<h4>Ingredients</h4>

<h6><code>GET /ingredients</code></h6>

<p>Fetch all ingredients.</p>

<ul>
<li><p><strong>Parameters</strong></p>

<ul>
<li>none</li>
</ul></li>
<li><p><strong>Response</strong></p>

<ul>
<li>A list of <code>ingredient</code>s.</li>
</ul></li>
<li><p><strong>Sample Response</strong></p>

<pre class="code json"><code class="json">[
{
  &quot;id&quot;: 266,
  &quot;name&quot;: &quot;Rails Application Server&quot;,
  &quot;icon&quot;: &quot;server&quot;,
  &quot;body&quot;: &quot;The Puma application server running the Rails application.\n\n&quot;,
  &quot;parent_id&quot;: 262,
  &quot;created_at&quot;: &quot;2016-12-13T13:52:58.352Z&quot;,
  &quot;updated_at&quot;: &quot;2016-12-13T13:52:58.352Z&quot;,
  &quot;children&quot;: [

  ],
  &quot;constraints&quot;: [
    {
      &quot;id&quot;: 2012,
      &quot;type&quot;: &quot;DependencyConstraint&quot;,
      &quot;ingredient_id&quot;: 266,
      &quot;created_at&quot;: &quot;2016-12-13T13:52:58.790Z&quot;,
      &quot;updated_at&quot;: &quot;2016-12-13T13:52:58.790Z&quot;,
      &quot;target_id&quot;: 265,
      &quot;source_id&quot;: 266
    },
    &lt;...&gt;
  ],
  &quot;workloads&quot;: {
    &quot;cpu_workload&quot;: {
      &quot;id&quot;: 206,
      &quot;cspu_user_capacity&quot;: 500,
      &quot;parallelism&quot;: 0.97,
      &quot;ingredient_id&quot;: 266
    },
    &lt;...&gt;
  }
},
&lt;...&gt;
]
</code></pre></li>
</ul>

<h6><code>POST /ingredients</code></h6>

<p>Create an ingredient</p>

<ul>
<li><p><strong>Parameters</strong></p>

<ul>
<li>An <code>ingredient</code> JSON object with the following structure:</li>
</ul>

<pre class="code json"><code class="json">{ &quot;ingredient&quot;: {
  &quot;name&quot;: &quot;&lt;...&gt;&quot;,
  &quot;icon&quot;: &quot;&lt;... (a font-awesome icon class)&gt;&quot;,
  &quot;body&quot;: &quot;&lt;...&gt;&quot;,
  &quot;parent_id&quot;: &lt;nn&gt;,
  &quot;&lt;workload&gt;_attributes&quot;: [ &lt;workload&gt;, &lt;...&gt; ],
  &quot;&lt;constraint&gt;_attributes&quot;: [ &lt;constraint&gt;, &lt;...&gt; ]
}}
</code></pre></li>
<li><p><strong>Response</strong></p>

<ul>
<li><code>201 created</code> if the resource was successfully created</li>
<li><code>422 unprocessable entity</code> if the resource could not be saved. The JSON response will contain a list of errors that prevented the resource from being saved. </li>
</ul></li>
</ul>

<h6><code>GET /ingredients/:id</code></h6>

<p>Fetch an ingredient</p>

<ul>
<li><strong>Parameters</strong>

<ul>
<li><code>:id</code>: The ID of the ingredient to fetch</li>
</ul></li>
<li><strong>Response</strong>

<ul>
<li>An <code>ingredient</code> JSON object</li>
<li><code>404</code> if the resource with the given ID could not be found.</li>
</ul></li>
</ul>

<h6><code>[PATCH|PUT] /ingredients/:id</code></h6>

<p>Update an ingredient</p>

<ul>
<li><strong>Parameters</strong>

<ul>
<li>An <code>ingredient</code> JSON object (see above).</li>
</ul></li>
<li><strong>Response</strong>

<ul>
<li><code>200 ok</code> if the resource was successfully created</li>
<li><code>422 unprocessable entity</code> if the resource could not be saved. The JSON response will contain a list of errors that prevented the resource from being saved. </li>
</ul></li>
</ul>

<h6><code>DELETE /ingredients/:id</code></h6>

<p>Delete an ingredient</p>

<ul>
<li><strong>Parameters</strong>

<ul>
<li><code>:id</code>: The ID of the ingredient to delete</li>
</ul></li>
<li><strong>Response</strong>

<ul>
<li><code>204 no content</code> if the resource was successfully deleted</li>
<li><code>404</code> if the resource with the given ID could not be found.</li>
</ul></li>
</ul>

<h6><code>GET /ingredients/:ingredient_id/copy</code></h6>

<p>Copy an ingredient hierarchy starting at <code>:ingredient_id</code>.</p>

<ul>
<li><strong>Parameters</strong>

<ul>
<li><code>:ingredient_id</code>: The ID of the root ingredient of the hierarchy to copy</li>
</ul></li>
<li><strong>Response</strong>

<ul>
<li><code>200 ok</code> if the ingredient was successfully copied</li>
<li><code>500</code> or <code>422 unprocessable entity</code> if the ingredient could not be copied</li>
</ul></li>
</ul>

<h6><code>GET /ingredients/:ingredient_id/template</code></h6>

<p>Convert an ingredient hierarchy into a template</p>

<ul>
<li><strong>Parameters</strong>

<ul>
<li><code>:ingredient_id</code>: The ID of the root ingredient</li>
</ul></li>
<li><strong>Response</strong>

<ul>
<li><code>200 ok</code> if the ingredient was successfully converted into a template</li>
<li><code>500</code> or <code>422 unprocessable entity</code> if something went wrong</li>
</ul></li>
</ul>

<h6><code>GET /ingredients/:ingredient_id/instance</code></h6>

<p>Make a new instance from a template ingredient hierarchy</p>

<ul>
<li><strong>Parameters</strong>

<ul>
<li><code>:ingredient_id</code>: The ID of the template root ingredient</li>
</ul></li>
<li><strong>Response</strong>

<ul>
<li><code>200 ok</code> if the instance hierarchy was successfully created</li>
<li><code>422 unprocessable entity</code> if something went wrong. </li>
</ul></li>
</ul>

<h6><code>GET /ingredients/:ingredient_id/instances</code></h6>

<p>Fetch all instances of a given template ingredient</p>

<ul>
<li><strong>Parameters</strong>

<ul>
<li><code>:ingredient_id</code>: The ID of the template root ingredient</li>
</ul></li>
<li><strong>Returns</strong>

<ul>
<li>A list of <code>ingredients</code></li>
</ul></li>
</ul>

<h5>Applications</h5>

<h6><code>GET /applications</code></h6>

<p>Fetch all application defined by the current user</p>

<ul>
<li><p><strong>Parameters</strong></p>

<ul>
<li>none</li>
</ul></li>
<li><p><strong>Response</strong></p>

<ul>
<li>A list of <code>ingredient</code>s.</li>
</ul></li>
</ul>

<h5>Templates</h5>

<h6><code>GET /templates</code></h6>

<p>Fetch all available templates</p>

<ul>
<li><p><strong>Parameters</strong></p>

<ul>
<li>none</li>
</ul></li>
<li><p><strong>Response</strong></p>

<ul>
<li>A list of <code>ingredient</code>s.</li>
</ul></li>
</ul>

<h5>Deployment Recommendations</h5>

<h6><code>GET /ingredients/:ingredient_id/recommendations</code></h6>

<p>Fetch all recommendations for an ingredient</p>

<ul>
<li><p><strong>Parameters</strong></p>

<ul>
<li><code>:ingredient_id</code>: The ID of the root ingredient</li>
</ul></li>
<li><p><strong>Response</strong></p>

<ul>
<li>A list of <code>deployment_recommendation</code> JSON objects</li>
</ul></li>
<li><p><strong>Sample Response</strong></p>

<pre class="code json"><code class="json">[
{
  &quot;id&quot;: 2149,
  &quot;vm_cost&quot;: &quot;35.00&quot;,
  &quot;total_cost&quot;: 35005,
  &quot;recommendation&quot;: [
    {
      &quot;ingredient&quot;: {
        &quot;id&quot;: 256,
        &quot;name&quot;: &quot;Rails Application Server&quot;,
        &quot;icon&quot;: &quot;server&quot;,
        &quot;body&quot;: &quot;&lt;...&gt;&quot;,
        &quot;parent_id&quot;: 252,
        &quot;workloads&quot;: {
          &quot;cpu_workload&quot;: {
            &quot;cspu_user_capacity&quot;: 500,
            &quot;parallelism&quot;: 0.97,
          },
          &quot;ram_workload&quot;: {
            &quot;ram_mb_required&quot;: 450,
            &quot;ram_mb_required_user_capacity&quot;: 150,
            &quot;ram_mb_growth_per_user&quot;: 0.03,
          },
          &quot;scaling_workload&quot;: {
            &quot;scale_ingredient&quot;: true,
          }
        }
      },
      &quot;resource&quot;: {
        &quot;resource_code&quot;: 742746843,
        &quot;resource_type&quot;: &quot;compute&quot;,
        &quot;name&quot;: &quot;512mb&quot;,
        &quot;provider&quot;: &quot;Digital Ocean&quot;,
        &quot;cores&quot;: 1.0,
        &quot;mem_gb&quot;: 0.5,
        &quot;price_per_hour&quot;: 0.00744,
        &quot;price_per_month&quot;: 5.0,
        &quot;region&quot;: &quot;ams1&quot;,
        &quot;region_area&quot;: &quot;EU&quot;,
      },
      &quot;resource_count&quot;: &quot;2&quot;
    }, 
    &lt;...&gt;
  ],
  &quot;num_simultaneous_users&quot;: 1000,
  &quot;application&quot;: {
    &quot;id&quot;: 252,
    &quot;name&quot;: &quot;Rails Application with PostgreSQL Backend [v4]&quot;,
    &quot;icon&quot;: &quot;server&quot;,
    &quot;body&quot;: &quot;&lt;...&gt;&quot;,
    &quot;template_id&quot;: 90,
    &quot;workloads&quot;: {
      &quot;cpu_workload&quot;: {
        &quot;id&quot;: 233,
        &quot;cspu_user_capacity&quot;: 1500,
        &quot;parallelism&quot;: 0.9,
        &quot;ingredient_id&quot;: 252
      },
      &quot;ram_workload&quot;: {
        &quot;id&quot;: 233,
        &quot;ram_mb_required&quot;: 600,
        &quot;ram_mb_required_user_capacity&quot;: 200,
        &quot;ram_mb_growth_per_user&quot;: 0.3,
        &quot;ingredient_id&quot;: 252
      },
      &quot;scaling_workload&quot;: {
        &quot;id&quot;: 236,
        &quot;scale_ingredient&quot;: true,
        &quot;ingredient_id&quot;: 252
      }
    }
  },
  &quot;status&quot;: &quot;satisfiable&quot;
},
{
  &quot;id&quot;: 2148,
  &quot;vm_cost&quot;: &quot;119.26&quot;,
  &quot;total_cost&quot;: 119273,
  &quot;recommendation&quot;: [
    {
      &quot;ingredient&quot;: { &quot;id&quot;: 256, &lt;...&gt; },
      &quot;resource&quot;: {
        &quot;resource_code&quot;: 195426216,
        &quot;resource_type&quot;: &quot;compute&quot;,
        &quot;name&quot;: &quot;n1-highcpu-2&quot;,
        &quot;provider&quot;: &quot;Google&quot;,
        &quot;cores&quot;: 2.0,
        &quot;mem_gb&quot;: 1.8,
        &quot;price_per_hour&quot;: 0.084,
        &quot;price_per_month&quot;: 43.7472,
        &quot;region&quot;: &quot;europe&quot;,
        &quot;region_area&quot;: &quot;EU&quot;,
      },
      &quot;resource_count&quot;: &quot;1&quot;
    }, 
    &lt;...&gt;
  ],
  &quot;num_simultaneous_users&quot;: 1000,
  &quot;application&quot;: { &lt;...&gt; },
  &quot;status&quot;: &quot;satisfiable&quot;
},
&lt;...&gt;
]
</code></pre></li>
</ul>

<h6><code>GET /ingredients/:ingredient_id/has_recommendations</code></h6>

<p>Check if recommendations exist for an ingredient</p>

<ul>
<li><strong>Parameters</strong>

<ul>
<li><code>:ingredient_id</code>: The ID of the root ingredient</li>
</ul></li>
<li><strong>Response</strong>

<ul>
<li><code>true</code> if recommendations exist,</li>
<li><code>false</code> otherwise</li>
</ul></li>
</ul>

<h6><code>POST /ingredients/:ingredient_id/trigger_range</code></h6>

<p>Trigger generation of multiple recommendations for an ingredient. Recommendations to be generated are specified using a range.</p>

<ul>
<li><strong>Parameters</strong>

<ul>
<li><code>min</code>: The minimum number of users to generate a recommendation for</li>
<li><code>max</code>: The maximum number of simulated uses to generate a deployment recommendation for</li>
<li><code>step</code>: Generate recommendations for every <code>step</code> users between <code>min</code> and <code>max</code></li>
</ul></li>
<li><strong>Response</strong>

<ul>
<li><code>job_id</code>: The ID of the background job calculating the recommendations.</li>
</ul></li>
</ul>

<h6><code>GET /ingredients/:ingredient_id/recommendations_completed</code></h6>

<p>Determine if all queued jobs to generate deployment recommendations are completed.</p>

<ul>
<li><strong>Parameters</strong>

<ul>
<li><code>:ingredient_id</code>: The ID of the root ingredient</li>
</ul></li>
<li><strong>Response</strong>

<ul>
<li><code>true</code> if all recommendation jobs are finished,</li>
<li><code>false</code> otherwise</li>
</ul></li>
</ul>

<h6><code>DELETE /recommendations/:recommendation_id</code></h6>

<p>Delete a deployment recommendation.</p>

<ul>
<li><strong>Parameters</strong>

<ul>
<li><code>:recommendation_id</code>: The ID of the recommendation</li>
</ul></li>
<li><strong>Response</strong>

<ul>
<li><code>200</code> if the resource was successfully deleted</li>
<li><code>404</code> if the resource with the given ID could not be found.</li>
</ul></li>
</ul>

<h6><code>DELETE /ingredients/:ingredient_id/recommendations</code></h6>

<p>Delete all deployment recommendations for an ingredient.</p>

<ul>
<li><strong>Parameters</strong>

<ul>
<li><code>:ingredient_id</code>: The ID of the root ingredient</li>
</ul></li>
<li><strong>Response</strong>

<ul>
<li><code>200</code> if the resource was successfully deleted</li>
<li><code>404</code> if the resource with the given ID could not be found.</li>
</ul></li>
</ul>

<h4>Workloads</h4>

<h5>CPU Workloads</h5>

<h6><code>GET /cpu_workloads</code></h6>

<p>Fetch all stored CPU workloads.</p>

<ul>
<li><p><strong>Parameters</strong></p>

<ul>
<li>none</li>
</ul></li>
<li><p><strong>Response</strong></p>

<ul>
<li>A list of <code>cpu_workload</code>s.</li>
</ul></li>
<li><p><strong>Sample Response</strong></p>

<pre class="code json"><code class="json">[
{
  &quot;id&quot;: 165,
  &quot;cspu_user_capacity&quot;: 1500,
  &quot;parallelism&quot;: 0.9,
  &quot;ingredient_id&quot;: 215
},
&lt;...&gt;
]
</code></pre></li>
</ul>

<h6><code>POST /cpu_workloads</code></h6>

<p>Create a CPU workload.</p>

<ul>
<li><p><strong>Parameters</strong></p>

<ul>
<li>An <code>cpu_workload</code> JSON object with the following structure:</li>
</ul>

<pre class="code json"><code class="json">{ &quot;cpu_workload&quot;: {
  &quot;cspu_user_capacity&quot;: &lt;nn&gt;,
  &quot;parallelism&quot;: &lt;nn&gt;,
  &quot;ingredient_id&quot;: &lt;nn&gt;,
}}
</code></pre></li>
<li><p><strong>Response</strong></p>

<ul>
<li><code>201 created</code> if the resource was successfully created</li>
<li><code>422 unprocessable entity</code> if the resource could not be saved. The JSON response will contain a list of errors that prevented the resource from being saved. </li>
</ul></li>
</ul>

<h6><code>GET /cpu_workloads/:id</code></h6>

<p>Fetch a CPU workload.</p>

<ul>
<li><strong>Parameters</strong>

<ul>
<li><code>:id</code>: The ID of the resource to fetch</li>
</ul></li>
<li><strong>Response</strong>

<ul>
<li>A <code>cpu_workload</code> JSON object</li>
<li><code>404</code> if the resource with the given ID could not be found.</li>
</ul></li>
</ul>

<h6><code>[PATCH|PUT] /cpu_workloads/:id</code></h6>

<p>Update a CPU workload.</p>

<ul>
<li><strong>Parameters</strong>

<ul>
<li>A <code>cpu_workload</code> JSON object (see above).</li>
</ul></li>
<li><strong>Response</strong>

<ul>
<li><code>200 ok</code> if the resource was successfully created</li>
<li><code>422 unprocessable entity</code> if the resource could not be saved. The JSON response will contain a list of errors that prevented the resource from being saved. </li>
</ul></li>
</ul>

<h6><code>DELETE /cpu_workloads/:id</code></h6>

<p>Delete a CPU workload.</p>

<ul>
<li><strong>Parameters</strong>

<ul>
<li><code>:id</code>: The ID of the resource</li>
</ul></li>
<li><strong>Response</strong>

<ul>
<li><code>200</code> if the resource was successfully deleted</li>
<li><code>404</code> if the resource with the given ID could not be found.</li>
</ul></li>
</ul>

<h5>RAM Workloads</h5>

<h6><code>GET /ram_workloads</code></h6>

<p>Fetch all stored RAM workloads.</p>

<ul>
<li><p><strong>Parameters</strong></p>

<ul>
<li>none</li>
</ul></li>
<li><p><strong>Response</strong></p>

<ul>
<li>A list of <code>ram_workload</code>s.</li>
</ul></li>
<li><p><strong>Sample Response</strong></p>

<pre class="code json"><code class="json">[
{
  &quot;id&quot;: 166,
  &quot;ram_mb_required&quot;: 600,
  &quot;ram_mb_required_user_capacity&quot;: 200,
  &quot;ram_mb_growth_per_user&quot;: 0.3,
  &quot;ingredient_id&quot;: 216
},
&lt;...&gt;
]
</code></pre></li>
</ul>

<h6><code>POST /ram_workloads</code></h6>

<p>Create a RAM workload.</p>

<ul>
<li><p><strong>Parameters</strong></p>

<ul>
<li>A <code>ram_workload</code> JSON object with the following structure:</li>
</ul>

<pre class="code json"><code class="json">{ &quot;ram_workload&quot;: {
  &quot;ram_mb_required&quot;: &lt;nn&gt;,
  &quot;ram_mb_required_user_capacity&quot;: &lt;nn&gt;,
  &quot;ram_mb_growth_per_user&quot;: &lt;nn&gt;,
  &quot;ingredient_id&quot;: &lt;nn&gt;,
}}
</code></pre></li>
<li><p><strong>Response</strong></p>

<ul>
<li><code>201 created</code> if the resource was successfully created</li>
<li><code>422 unprocessable entity</code> if the resource could not be saved. The JSON response will contain a list of errors that prevented the resource from being saved. </li>
</ul></li>
</ul>

<h6><code>GET /ram_workloads/:id</code></h6>

<p>Fetch a RAM workload.</p>

<ul>
<li><strong>Parameters</strong>

<ul>
<li><code>:id</code>: The ID of the resource to fetch</li>
</ul></li>
<li><strong>Response</strong>

<ul>
<li>A <code>ram_workload</code> JSON object</li>
<li><code>404</code> if the resource with the given ID could not be found.</li>
</ul></li>
</ul>

<h6><code>[PATCH|PUT] /ram_workloads/:id</code></h6>

<p>Update a RAM workload.</p>

<ul>
<li><strong>Parameters</strong>

<ul>
<li>A <code>ram_workload</code> JSON object (see above).</li>
</ul></li>
<li><strong>Response</strong>

<ul>
<li><code>200 ok</code> if the resource was successfully created</li>
<li><code>422 unprocessable entity</code> if the resource could not be saved. The JSON response will contain a list of errors that prevented the resource from being saved. </li>
</ul></li>
</ul>

<h6><code>DELETE /ram_workloads/:id</code></h6>

<p>Delete a RAM workload.</p>

<ul>
<li><strong>Parameters</strong>

<ul>
<li><code>:id</code>: The ID of the resource</li>
</ul></li>
<li><strong>Response</strong>

<ul>
<li><code>200</code> if the resource was successfully deleted</li>
<li><code>404</code> if the resource with the given ID could not be found.</li>
</ul></li>
</ul>

<h5>Traffic Workloads</h5>

<h6><code>GET /traffic_workloads</code></h6>

<p>Fetch all stored traffic workloads.</p>

<ul>
<li><p><strong>Parameters</strong></p>

<ul>
<li>none</li>
</ul></li>
<li><p><strong>Response</strong></p>

<ul>
<li>A list of <code>traffic_workload</code>s.</li>
</ul></li>
</ul>

<h6><code>POST /traffic_workloads</code></h6>

<p>Create a traffic workload.</p>

<ul>
<li><p><strong>Parameters</strong></p>

<ul>
<li>A <code>traffic_workload</code> JSON object with the following structure:</li>
</ul>

<pre class="code json"><code class="json">{ &quot;traffic_workload&quot;: {
  &quot;requests_per_visit&quot;: &lt;nn&gt;,
  &quot;request_size_kb&quot;: &lt;nn&gt;,
  &quot;visits_per_month&quot;: &lt;nn&gt;,
  &quot;ingredient_id&quot;: &lt;nn&gt;,
}}
</code></pre></li>
<li><p><strong>Response</strong></p>

<ul>
<li><code>201 created</code> if the resource was successfully created</li>
<li><code>422 unprocessable entity</code> if the resource could not be saved. The JSON response will contain a list of errors that prevented the resource from being saved. </li>
</ul></li>
</ul>

<h6><code>GET /traffic_workloads/:id</code></h6>

<p>Fetch a traffic workload.</p>

<ul>
<li><strong>Parameters</strong>

<ul>
<li><code>:id</code>: The ID of the resource to fetch</li>
</ul></li>
<li><strong>Response</strong>

<ul>
<li>A <code>traffic_workload</code> JSON object</li>
<li><code>404</code> if the resource with the given ID could not be found.</li>
</ul></li>
</ul>

<h6><code>[PATCH|PUT] /traffic_workloads/:id</code></h6>

<p>Update a traffic workload.</p>

<ul>
<li><strong>Parameters</strong>

<ul>
<li>A <code>traffic_workload</code> JSON object (see above).</li>
</ul></li>
<li><strong>Response</strong>

<ul>
<li><code>200 ok</code> if the resource was successfully created</li>
<li><code>422 unprocessable entity</code> if the resource could not be saved. The JSON response will contain a list of errors that prevented the resource from being saved. </li>
</ul></li>
</ul>

<h6><code>DELETE /traffic_workloads/:id</code></h6>

<p>Delete a traffic workload.</p>

<ul>
<li><strong>Parameters</strong>

<ul>
<li><code>:id</code>: The ID of the resource</li>
</ul></li>
<li><strong>Response</strong>

<ul>
<li><code>200</code> if the resource was successfully deleted</li>
<li><code>404</code> if the resource with the given ID could not be found.</li>
</ul></li>
</ul>

<h5>Scaling Workloads</h5>

<h6><code>GET /scaling_workloads</code></h6>

<p>Fetch all stored scaling workloads.</p>

<ul>
<li><p><strong>Parameters</strong></p>

<ul>
<li>none</li>
</ul></li>
<li><p><strong>Response</strong></p>

<ul>
<li>A list of <code>scaling_workload</code>s.</li>
</ul></li>
<li><p><strong>Sample Response</strong></p>

<pre class="code json"><code class="json">[
{
  &quot;id&quot;: 236,
  &quot;scale_ingredient&quot;: true,
  &quot;ingredient_id&quot;: 252
},
&lt;...&gt;
]
</code></pre></li>
</ul>

<h6><code>POST /scaling_workloads</code></h6>

<p>Create a scaling workload.</p>

<ul>
<li><p><strong>Parameters</strong></p>

<ul>
<li>A <code>sacling_workload</code> JSON object with the following structure:</li>
</ul>

<pre class="code json"><code class="json">{ &quot;scaling_workload&quot;: {
  &quot;scale_ingredient&quot;: &lt;true|false&gt;,
  &quot;ingredient_id&quot;: &lt;nn&gt;,
}}
</code></pre></li>
<li><p><strong>Response</strong></p>

<ul>
<li><code>201 created</code> if the resource was successfully created</li>
<li><code>422 unprocessable entity</code> if the resource could not be saved. The JSON response will contain a list of errors that prevented the resource from being saved. </li>
</ul></li>
</ul>

<h6><code>GET /scaling_workloads/:id</code></h6>

<p>Fetch a scaling workload.</p>

<ul>
<li><strong>Parameters</strong>

<ul>
<li><code>:id</code>: The ID of the resource to fetch</li>
</ul></li>
<li><strong>Response</strong>

<ul>
<li>A <code>scaling_workload</code> JSON object</li>
<li><code>404</code> if the resource with the given ID could not be found.</li>
</ul></li>
</ul>

<h6><code>[PATCH|PUT] /scaling_workloads/:id</code></h6>

<p>Update a scaling workload.</p>

<ul>
<li><strong>Parameters</strong>

<ul>
<li>A <code>scaling_workload</code> JSON object (see above).</li>
</ul></li>
<li><strong>Response</strong>

<ul>
<li><code>200 ok</code> if the resource was successfully created</li>
<li><code>422 unprocessable entity</code> if the resource could not be saved. The JSON response will contain a list of errors that prevented the resource from being saved. </li>
</ul></li>
</ul>

<h6><code>DELETE /scaling_workloads/:id</code></h6>

<p>Delete a scaling workload.</p>

<ul>
<li><strong>Parameters</strong>

<ul>
<li><code>:id</code>: The ID of the resource</li>
</ul></li>
<li><strong>Response</strong>

<ul>
<li><code>200</code> if the resource was successfully deleted</li>
<li><code>404</code> if the resource with the given ID could not be found.</li>
</ul></li>
</ul>

<h4>Constraints</h4>

<h6><code>GET /constraints</code></h6>

<p>Fetch all stored constraints.</p>

<ul>
<li><p><strong>Parameters</strong></p>

<ul>
<li>none</li>
</ul></li>
<li><p><strong>Response</strong></p>

<ul>
<li>A list of <code>constraint</code>s.</li>
</ul></li>
<li><p><strong>Sample Response</strong></p>

<pre class="code json"><code class="json">[
{
  &quot;id&quot;: 1973,
  &quot;type&quot;: &quot;PreferredRegionAreaConstraint&quot;,
  &quot;ingredient_id&quot;: 252,
  &quot;preferred_region_area&quot;: &quot;EU&quot;
},
{
  &quot;id&quot;: 1974,
  &quot;type&quot;: &quot;ProviderConstraint&quot;,
  &quot;ingredient_id&quot;: 252,
  &quot;preferred_providers&quot;: [
    &quot;Amazon&quot;,
    &quot;Google&quot;,
    &quot;Digital Ocean&quot;,
    &quot;Microsoft Azure&quot;
  ]
},
{
  &quot;id&quot;: 1981,
  &quot;type&quot;: &quot;DependencyConstraint&quot;,
  &quot;ingredient_id&quot;: 253,
  &quot;target_id&quot;: 254,
  &quot;source_id&quot;: 253
},
{
  &quot;id&quot;: 2001,
  &quot;type&quot;: &quot;RamConstraint&quot;,
  &quot;ingredient_id&quot;: 263,
  &quot;min_ram&quot;: 504
},
{
  &quot;id&quot;: 2000,
  &quot;type&quot;: &quot;CpuConstraint&quot;,
  &quot;ingredient_id&quot;: 263,
  &quot;min_cpus&quot;: 1
},
&lt;...&gt;
]
</code></pre></li>
</ul>

<h6><code>POST /constraints</code></h6>

<p>Create a constraint.</p>

<ul>
<li><p><strong>Parameters</strong></p>

<ul>
<li>A <code>constraint</code> JSON object with the following structure:</li>
<li><p>Dependency constraint:</p>

<pre class="code json"><code class="json">{ &quot;constraint&quot;: {
&quot;type&quot;: &quot;DependencyConstraint&quot;,
&quot;source_id&quot;: &lt;nn&gt;,
&quot;target_id&quot;: &lt;nn&gt;,
&quot;ingredient_id&quot;: &lt;nn&gt;,
}}
</code></pre></li>
<li><p>CPU constraint:</p>

<pre class="code json"><code class="json">{ &quot;constraint&quot;: {
&quot;type&quot;: &quot;CPUConstraint&quot;,
&quot;min_cpus&quot;: &lt;nn&gt;,
&quot;ingredient_id&quot;: &lt;nn&gt;,
}}
</code></pre></li>
<li><p>RAM constraint:</p>

<pre class="code json"><code class="json">{ &quot;constraint&quot;: {
&quot;type&quot;: &quot;RAMConstraint&quot;,
&quot;min_ram&quot;: &lt;nn&gt;,
&quot;ingredient_id&quot;: &lt;nn&gt;,
}}
</code></pre></li>
<li><p>Provider constraint:</p>

<pre class="code json"><code class="json">{ &quot;constraint&quot;: {
&quot;type&quot;: &quot;ProviderConstraint&quot;,
&quot;preferred_providers&quot;: [ &quot;Amazon&quot;, &quot;Google&quot;, &lt;...&gt; ],
&quot;ingredient_id&quot;: &lt;nn&gt;,
}}
</code></pre>

<p>Retrieve available provider names using <code>GET /providers/names</code>.</p></li>
<li><p>Preferred region constraint:</p>

<pre class="code json"><code class="json">{ &quot;constraint&quot;: {
&quot;type&quot;: &quot;PreferredRegionAreaConstraint&quot;,
&quot;preferred_region_area&quot;: &quot;EU&quot;,
&quot;ingredient_id&quot;: &lt;nn&gt;,
}}
</code></pre>

<p>Retrieve available region areas using <code>GET /resources_region_areas</code>.</p></li>
</ul></li>
<li><p><strong>Response</strong></p>

<ul>
<li><code>201 created</code> if the resource was successfully created</li>
<li><code>422 unprocessable entity</code> if the resource could not be saved. The JSON response will contain a list of errors that prevented the resource from being saved. </li>
</ul></li>
</ul>

<h6><code>GET /constraints/:id</code></h6>

<p>Fetch a constraint.</p>

<ul>
<li><strong>Parameters</strong>

<ul>
<li><code>:id</code>: The ID of the resource to fetch</li>
</ul></li>
<li><strong>Response</strong>

<ul>
<li>A <code>constraint</code> JSON object</li>
<li><code>404</code> if the resource with the given ID could not be found.</li>
</ul></li>
</ul>

<h6><code>[PATCH|PUT] /constraints/:id</code></h6>

<p>Update a constraint.</p>

<ul>
<li><strong>Parameters</strong>

<ul>
<li>A <code>constraint</code> JSON object (see above).</li>
</ul></li>
<li><strong>Response</strong>

<ul>
<li><code>200 ok</code> if the resource was successfully created</li>
<li><code>422 unprocessable entity</code> if the resource could not be saved. The JSON response will contain a list of errors that prevented the resource from being saved. </li>
</ul></li>
</ul>

<h6><code>DELETE /constraints/:id</code></h6>

<p>Delete a constraint.</p>

<ul>
<li><strong>Parameters</strong>

<ul>
<li><code>:id</code>: The ID of the resource</li>
</ul></li>
<li><strong>Response</strong>

<ul>
<li><code>200</code> if the resource was successfully deleted</li>
<li><code>404</code> if the resource with the given ID could not be found.</li>
</ul></li>
</ul>

<h4>Providers and Resources</h4>

<h6><code>GET /providers/names</code></h6>

<p>Fetch available cloud providers.</p>

<ul>
<li><p><strong>Parameters</strong></p>

<ul>
<li>none</li>
</ul></li>
<li><p><strong>Response</strong></p>

<ul>
<li>The list of providers that the Cloud Stove instance has pricing data for</li>
</ul></li>
<li><p><strong>Sample Response</strong></p>

<pre class="code json"><code class="json">[
&quot;Microsoft Azure&quot;,
&quot;Joyent&quot;,
&quot;Rackspace&quot;,
&quot;Amazon&quot;,
&quot;Digital Ocean&quot;,
&quot;Google&quot;,
&quot;Atlantic.net&quot;
]
</code></pre></li>
</ul>

<h6><code>GET /resources_region_areas</code></h6>

<p>Fetch available region areas for deployment recommendations.</p>

<ul>
<li><ul>
<li><strong>Parameters</strong></li>
</ul>

<ul>
<li>none</li>
</ul></li>
<li><p><strong>Response</strong></p>

<ul>
<li>The list of configured region areas.</li>
</ul></li>
<li><p><strong>Sample Response</strong></p>

<pre class="code json"><code class="json">[
&quot;EU&quot;,
&quot;ASIA&quot;,
&quot;US&quot;,
&quot;SA&quot;
]
</code></pre></li>
</ul>

<h6><code>GET /resources</code></h6>

<p>Fetch all stored provider resources and their pricing data.</p>

<ul>
<li><p><strong>Parameters</strong></p>

<ul>
<li>none</li>
</ul></li>
<li><p><strong>Response</strong></p>

<ul>
<li>The list of resources that the Cloud Stove instance has pricing data for.</li>
</ul></li>
<li><p><strong>Sample Response</strong></p>

<pre class="code json"><code class="json">[
{
  &quot;resource_code&quot;: 1804269842,
  &quot;resource_type&quot;: &quot;compute&quot;,
  &quot;name&quot;: &quot;16gb&quot;,
  &quot;provider&quot;: &quot;Digital Ocean&quot;,
  &quot;cores&quot;: 8.0,
  &quot;mem_gb&quot;: 16.0,
  &quot;price_per_hour&quot;: 0.2381,
  &quot;price_per_month&quot;: 160.0,
  &quot;region&quot;: &quot;tor1&quot;,
  &quot;region_area&quot;: &quot;US&quot;,
  &quot;created_at&quot;: &quot;2016-09-26T13:34:33.894Z&quot;,
  &quot;updated_at&quot;: &quot;2016-09-26T13:34:33.894Z&quot;
},
{
  &quot;resource_code&quot;: 3830277681,
  &quot;resource_type&quot;: &quot;compute&quot;,
  &quot;name&quot;: &quot;m-16gb&quot;,
  &quot;provider&quot;: &quot;Digital Ocean&quot;,
  &quot;cores&quot;: 2.0,
  &quot;mem_gb&quot;: 16.0,
  &quot;price_per_hour&quot;: 0.17857,
  &quot;price_per_month&quot;: 120.0,
  &quot;region&quot;: &quot;ams2&quot;,
  &quot;region_area&quot;: &quot;EU&quot;,
  &quot;created_at&quot;: &quot;2016-09-26T13:34:33.902Z&quot;,
  &quot;updated_at&quot;: &quot;2016-09-26T13:34:33.902Z&quot;
}
&lt;...&gt;
]
</code></pre></li>
</ul>

<hr>

<p>Update the figures in this guide using the following command:</p>

<pre class="code shell"><code class="shell">rake docs:update_figures
</code></pre>
</div></div>

      <div id="footer">
  Generated on Thu Mar  2 15:02:21 2017 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.8 (ruby-2.3.3).
</div>

    </div>
  </body>
</html>